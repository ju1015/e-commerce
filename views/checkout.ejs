<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout - MyShop</title>
<style>
  body { 
    font-family: Arial; 
    background:#f5f5f5; 
    color:#333; 
    padding:2rem; 
  }
  .checkout-container { 
    max-width:600px; 
    margin:auto; 
    background:#fff; 
    padding:2rem; 
    border-radius:10px; 
    box-shadow:0 4px 10px rgba(0,0,0,0.1);
  }
  input, button { 
    width:100%; 
    padding:10px; 
    margin:0.5rem 0; 
    border-radius:5px; 
    border:1px solid #ccc;
    font-size:1rem;
  }
  button { 
    background:#28a745; 
    color:#fff; 
    border:none; 
    cursor:pointer; 
  }
  button:hover { 
    background:#218838; 
  }
  h3 { margin-top: 1.5rem; }
  .total { font-weight: bold; font-size: 1.2rem; margin-top:1rem; }
  .top-buttons {
    display:flex; 
    gap:10px; 
    margin-bottom:20px;
  }
  .top-buttons form button {
    width:auto; 
    padding:8px 16px; 
    font-size:0.95rem;
  }
  .cart-summary p {
    margin:5px 0;
  }
</style>
</head>
<body>

<div class="checkout-container">

  <h2>Checkout</h2>

  <!-- Top Buttons -->
  <div class="top-buttons">
    <form action="/profile" method="GET">
      <button type="submit">← Back to Home</button>
    </form>
    <form action="/shopNow" method="POST">
      <button type="submit">← Back to Shop</button>
    </form>
  </div>

  <h3>Cart Summary</h3>
  <div class="cart-summary">
    <% let total = 0; %>
    <% cartItems.forEach(item => { %>
      <% let subtotal = (item.productId.price || 0) * (item.quantity || 1); %>
      <p><%= item.productId.name %> x <%= item.quantity %> = ₹<%= subtotal %></p>
      <% total += subtotal; %>
    <% }) %>
  </div>

  <p class="total">Total: ₹<%= total %></p>

  <h3>Delivery Details</h3>
  <form id="checkoutForm" action="/placeorder" method="POST">
    <input type="text" name="address" placeholder="Enter Address" required>
    <input type="text" name="phone" placeholder="Enter Phone Number" required>
    <button type="submit">Place Order</button>
  </form>
</div>

</body>
</html>
